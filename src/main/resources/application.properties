# ===================================================================
# KOTSIN TRADE EXECUTION MODULE - APPLICATION CONFIGURATION
# ===================================================================

# Application Configuration
spring.application.name=trade-execution-module
server.port=8080

# ===================================================================
# DATABASE CONFIGURATION
# ===================================================================
spring.data.mongodb.uri=mongodb://localhost:27017/tradeIngestion

# ===================================================================
# KAFKA CONFIGURATION
# ===================================================================
spring.kafka.bootstrap-servers=localhost:9092

# Default Consumer Configuration (REMOVED - not used by any consumer)
# spring.kafka.consumer.group-id=${app.kafka.consumer.default-group-id}
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.consumer.properties.spring.json.trusted.packages=*
spring.kafka.consumer.properties.spring.json.value.default.type=java.util.HashMap

# Producer Configuration
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer

# ===================================================================
# CONSUMER GROUP CONFIGURATION - CENTRALIZED
# ===================================================================
app.kafka.consumer.bulletproof-signal-group-id=kotsin-trade-execution-enhanced-30m-retest-v3
app.kafka.consumer.market-data-group-id=kotsin-trade-execution-market-data-retest-v4
app.kafka.consumer.candlestick-group-id=kotsin-trade-execution-candlestick-retest-v1

# ===================================================================
# TRADING HOURS CONFIGURATION
# ===================================================================
app.trading.hours.nse.start=09:15
app.trading.hours.nse.end=15:30
app.trading.hours.mcx.start=09:00
app.trading.hours.mcx.end=23:30
app.trading.hours.timezone=Asia/Kolkata

# ===================================================================
# RISK MANAGEMENT CONFIGURATION
# ===================================================================
app.trading.risk.default-risk-percentage=1.5
app.trading.risk.max-risk-per-trade-percentage=2.0
app.trading.risk.max-portfolio-risk-percentage=5.0
app.trading.risk.min-risk-reward-ratio=1.5
app.trading.risk.max-position-size=5000
app.trading.risk.default-position-size=1000
app.trading.risk.max-portfolio-exposure=8.0
app.trading.risk.max-daily-loss-percentage=5.0

# ===================================================================
# TARGET CONFIGURATION
# ===================================================================
app.trading.targets.target1-multiplier=1.5
app.trading.targets.target2-multiplier=2.5
app.trading.targets.target3-multiplier=4.0
app.trading.targets.target4-multiplier=6.0

# ===================================================================
# VALIDATION CONFIGURATION
# ===================================================================
app.trading.validation.min-price-distance-percentage=0.5
app.trading.validation.max-price-distance-percentage=10.0

# ===================================================================
# TRADE LIMITS CONFIGURATION
# ===================================================================
app.trading.limits.max-active-trades=10
app.trading.limits.max-trades-per-script=2
app.trading.limits.max-daily-trades=20

# ===================================================================
# PORTFOLIO CONFIGURATION
# ===================================================================
app.portfolio.initial-capital=100000
app.portfolio.max-single-position=10.0
app.portfolio.max-sector-exposure=25.0
app.portfolio.max-drawdown-limit=15.0

# ===================================================================
# DIVERSIFICATION CONFIGURATION
# ===================================================================
app.diversification.max-simultaneous-trades=2
app.diversification.capital-split-percent=45.0
app.diversification.enable-fund-diversification=true

# ===================================================================
# KAFKA TOPICS CONFIGURATION
# ===================================================================
kafka.topics.market-data=forwardtesting-data
kafka.topics.results.trade-results=trade-results
kafka.topics.results.daily-summary=daily-trade-summary
kafka.topics.results.profit-loss=profit-loss
kafka.topics.signals=strategy-signals

# ===================================================================
# EXTERNAL API CONFIGURATION
# ===================================================================
company.mapping.api.base.url=http://localhost:8102

# ===================================================================
# TELEGRAM CONFIGURATION
# ===================================================================
telegram.bot.token=6110276523:AAFNH9wRYkQQymniK8ioE0EnmN_6pfUZkJk
telegram.chat.id=-4640817596
telegram.enabled=true
telegram.alerts.chat.id=-4640817596
telegram.execution.chat.id=-4924122957
telegram.pnl.chat.id=-4924122957
telegram.channels.enabled=true

# ===================================================================
# LOGGING CONFIGURATION
# ===================================================================
logging.level.com.kotsin.execution=INFO
logging.level.com.kotsin.execution.broker=DEBUG
logging.level.org.springframework.kafka.listener=WARN
logging.level.org.apache.kafka=WARN
logging.level.org.springframework.kafka=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ===================================================================
# ACTUATOR CONFIGURATION
# ===================================================================
management.endpoints.web.exposure.include=health,info,metrics,kafka
management.endpoint.health.show-details=always

# ===================================================================
# CORS CONFIGURATION
# ===================================================================
cors.allowed-origins=*
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=*
cors.max-age=3600

# ===================================================================
# SWAGGER/OPENAPI CONFIGURATION
# ===================================================================
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.config-url=/v3/api-docs/swagger-config
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.show-extensions=true
springdoc.swagger-ui.show-common-extensions=true
springdoc.api-docs.enabled=true
springdoc.api-docs.path=/v3/api-docs
springdoc.show-actuator=false 

# ===================================================================
# SIMULATION CONFIGURATION
# ===================================================================
# Controls the trading mode.
# LIVE: Real trading with broker integration.
# SIMULATION: No broker calls, but sends Telegram alerts.
# SILENT: No broker calls and no Telegram alerts.
trading.mode=LIVE
trading.mode.live=true

# ===================================================================
# 5 PAISA BROKER CREDENTIALS
# ===================================================================
fivepaisa.app-name=5P52162730
fivepaisa.app-ver=1.0
fivepaisa.os-name=WEB
fivepaisa.app-source=23312

# Production credential values copied from Option Producer module
fivepaisa.encrypt-key=kwKUJSQqOUKMtmlTeh228MLfeYdyfvcm
fivepaisa.key=4HKcWPg8bhVLGegdNXdGSh7pttmSIkjH
fivepaisa.user-id=s58VDSXoNiU
fivepaisa.login-id=52162730
fivepaisa.password=5Vhmjkgn7bs

# TOTP and PIN strategy –
#  • totp will be fetched at runtime from TOTP micro-service (see TokenService pattern)
#  • pin is kept constant as per working Option Producer logic
fivepaisa.totp=
fivepaisa.pin=161616

# Optional: endpoint that returns fresh 6-digit TOTP; leave default if not overridden
fivepaisa.totp-url=http://localhost:8002/getToto


trade.maxSkewSeconds=900


pivot.base-url=http://localhost:8103
history.base-url=http://localhost:8002



