spring:
  application:
    name: trade-execution-module
  
  # Database Configuration
  data:
    mongodb:
      uri: mongodb://devina:devina4@172.31.12.118:27017/tradeIngestion?authSource=admin
  
  # Kafka Configuration
  kafka:
    bootstrap-servers: 172.31.12.118:9092
    consumer:
      group-id: kotsin-trade-execution-enhanced-30m-comprehensive-fix-v3
      auto-offset-reset: earliest
      enable-auto-commit: false
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer

# Server Configuration
server:
  port: 9090

# Application Configuration
app:
  trading:
    hours:
      nse:
        start: "09:15"
        end: "15:30"
      mcx:
        start: "09:00"
        end: "23:30"
      timezone: "Asia/Kolkata"
    risk:
      max-risk-per-trade: 1.0
      default-position-size: 1000
      max-position-size: 10000
      max-portfolio-risk: 5.0
      max-active-trades: 10
      max-trades-per-script: 2
    targets:
      target1-multiplier: 1.5
      target2-multiplier: 2.5
      target3-multiplier: 4.0
      target4-multiplier: 6.0
  
  portfolio:
    initial-capital: 1000000
    max-single-position: 10.0
    max-sector-exposure: 25.0
    max-drawdown-limit: 15.0
  
  diversification:
    max-simultaneous-trades: 2
    capital-split-percent: 45.0
    enable-fund-diversification: true

# Kafka Topics Configuration
kafka:
  topics:
    market-data: forwardtesting-data
    results:
      trade-results: trade-results
      daily-summary: daily-trade-summary

# External API Configuration
company:
  mapping:
    api:
      base:
        url: http://13.126.14.119:8102

# Telegram Configuration
telegram:
  bot:
    token: 6110276523:AAFNH9wRYkQQymniK8ioE0EnmN_6pfUZkJk
  chat:
    id: -4640817596
  enabled: true
  
  # Separate Channels for Enhanced 30M
  alerts:
    chat:
      id: -4640817596
  execution:
    chat:
      id: -4987106706
  pnl:
    chat:
      id: -4924122957
  channels:
    enabled: true

# Logging Configuration
logging:
  level:
    com.kotsin.execution: INFO
    org.springframework.kafka.listener: WARN
    org.apache.kafka: WARN
    org.springframework.kafka: WARN
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,kafka
  endpoint:
    health:
      show-details: always

# Redis Configuration for indicator data
data:
  redis:
    host: localhost
    port: 6379
    timeout: 2000ms
    lettuce:
      pool:
        max-active: 8
        max-wait: -1ms
        max-idle: 8
        min-idle: 0

# CORS Configuration
cors:
  allowed-origins: "*"
  allowed-methods: "GET,POST,PUT,DELETE,OPTIONS"
  allowed-headers: "*"
  max-age: 3600

# Swagger/OpenAPI Configuration  
springdoc:
  swagger-ui:
    enabled: true
    path: /swagger-ui.html
    config-url: /v3/api-docs/swagger-config
    urls:
      - url: /v3/api-docs
        name: Trade Execution API
    operations-sorter: method
    tags-sorter: alpha
    show-extensions: true
    show-common-extensions: true
  api-docs:
    enabled: true
    path: /v3/api-docs
  show-actuator: false 